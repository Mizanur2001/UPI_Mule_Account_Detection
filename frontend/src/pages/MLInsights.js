import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { LoadingSpinner, ErrorAlert } from '../components/UI';
import { MLAnomalyChart } from '../components/Charts';
export const MLInsights = ({ scores, loading, error, }) => {
    if (loading)
        return _jsx(LoadingSpinner, { message: "Loading ML analysis..." });
    if (error)
        return _jsx(ErrorAlert, { title: "Error Loading Data", message: error.message });
    const anomalousCount = scores.filter((s) => s.ml_anomaly_label === 'ANOMALOUS').length;
    const suspiciousCount = scores.filter((s) => s.ml_anomaly_label === 'SUSPICIOUS').length;
    const normalCount = scores.filter((s) => s.ml_anomaly_label === 'NORMAL').length;
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "bg-slate-800 rounded-lg p-4", children: [_jsx("h2", { className: "text-white font-semibold mb-2", children: "\uD83E\uDDE0 Machine Learning Anomaly Detection" }), _jsxs("p", { className: "text-gray-400 text-sm", children: ["Our system uses an ", _jsx("strong", { children: "ensemble approach" }), " combining a custom-built ", _jsx("strong", { children: "Isolation Forest" }), "(unsupervised) with ", _jsx("strong", { children: "Z-score statistical outlier detection" }), " \u2014 requiring ", _jsx("strong", { children: "zero labeled fraud data" }), ". This makes it fully autonomous and deployable from day one."] })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [_jsxs("div", { className: "bg-slate-800 rounded-lg p-4", children: [_jsx("h3", { className: "text-red-400 font-semibold mb-1", children: "Anomalous" }), _jsx("p", { className: "text-3xl font-bold text-white", children: anomalousCount }), _jsx("p", { className: "text-xs text-gray-400 mt-1", children: "ML Score \u2265 70" })] }), _jsxs("div", { className: "bg-slate-800 rounded-lg p-4", children: [_jsx("h3", { className: "text-yellow-400 font-semibold mb-1", children: "Suspicious" }), _jsx("p", { className: "text-3xl font-bold text-white", children: suspiciousCount }), _jsx("p", { className: "text-xs text-gray-400 mt-1", children: "ML Score 45-69" })] }), _jsxs("div", { className: "bg-slate-800 rounded-lg p-4", children: [_jsx("h3", { className: "text-green-400 font-semibold mb-1", children: "Normal" }), _jsx("p", { className: "text-3xl font-bold text-white", children: normalCount }), _jsx("p", { className: "text-xs text-gray-400 mt-1", children: "ML Score < 45" })] })] }), _jsx("div", { children: _jsx(MLAnomalyChart, { scores: scores }) }), _jsxs("div", { className: "bg-slate-800 rounded-lg p-6 space-y-4", children: [_jsx("h3", { className: "text-white font-semibold", children: "How It Works" }), _jsxs("div", { className: "space-y-3", children: [_jsxs("div", { children: [_jsx("h4", { className: "text-blue-400 font-semibold text-sm", children: "Isolation Forest (70% weight)" }), _jsx("p", { className: "text-gray-400 text-sm", children: "An unsupervised ML algorithm that identifies anomalies by their isolation properties. Pathological transactions are easier to isolate than normal ones." })] }), _jsxs("div", { children: [_jsx("h4", { className: "text-blue-400 font-semibold text-sm", children: "Z-Score Statistical Analysis (30% weight)" }), _jsx("p", { className: "text-gray-400 text-sm", children: "Identifies transactions that deviate statistically from normal patterns. Any account with extreme velocity, amounts, or device behavior gets flagged." })] }), _jsxs("div", { children: [_jsx("h4", { className: "text-blue-400 font-semibold text-sm", children: "Key Features" }), _jsxs("ul", { className: "text-gray-400 text-sm space-y-1 list-disc list-inside", children: [_jsx("li", { children: "No training data needed \u2014 fully unsupervised" }), _jsx("li", { children: "Works on behavioral features (velocity, amounts, timing, patterns)" }), _jsx("li", { children: "Adapts to new fraud types automatically" }), _jsx("li", { children: "Interpretable results with evidence trails" })] })] })] })] }), _jsxs("div", { className: "bg-slate-800 rounded-lg p-4", children: [_jsx("h3", { className: "text-white font-semibold mb-4", children: "Top ML Anomalies" }), _jsx("div", { className: "space-y-2", children: scores
                            .filter((s) => s.ml_anomaly_label === 'ANOMALOUS')
                            .slice(0, 5)
                            .map((score) => (_jsxs("div", { className: "flex items-center justify-between bg-slate-900 p-3 rounded", children: [_jsx("span", { className: "font-mono text-xs text-gray-400", children: score.account_id }), _jsxs("div", { className: "text-right", children: [_jsx("div", { className: "text-red-400 font-bold", children: Math.round(score.ml_anomaly_score) }), _jsx("div", { className: "text-gray-500 text-xs", children: score.ml_anomaly_label })] })] }, score.account_id))) })] })] }));
};
